	AREA RESET,DATA,READONLY
	EXPORT __Vectors

__Vectors
	
	DCD 0x10001000
	DCD Reset_Handler
		ALIGN
		AREA mycode,CODE,READONLY
		ENTRY
		EXPORT Reset_Handler	

Reset_Handler
		
		MOV R1, #1
		MOV R2, #6
		MOV R3, #4
		MOV R4, #7
		MOV R5, #9
		MOV R6, #3
		MOV R7, #2
		MOV R8, #5
		MOV R9, #8
		MOV R10, #10
		STM R13!, {R1-R10}
		MOV R0, R13 ;R0 STORES THE STACK TOP
		MOV R2, #10 ;R2 STORES NUMBER OF ELEMENTS IN STACK
		MOV R8,#0	;R8 IS COUNTER FOR OUTER LOOP
OL		CMP R8,R2
		BEQ EXIT
		
		MOV R1, R0	
		MOV R3, R0
		SUB R3, #4
		ADD R9,R8,#1
IL		CMP R9,R2
		BEQ EXIN
		ADD R9,#1
		LDMDB R1,{R4}
		LDMDB R3!,{R5}
		CMP R5,R4
		BLT IL
		STMDB R1,{R5}
		STM R3,{R4}
		B IL
EXIN	SUB R0,#4
		ADD R8,#1
		B OL
		
EXIT	
		LDMDB R13!,{R1-R10}
STOP 	B STOP

		AREA mydata,DATA,READWRITE

		END
